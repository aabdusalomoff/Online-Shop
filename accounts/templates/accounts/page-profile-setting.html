{% extends 'base.html' %}

{% load static %}

{% block title %}Settings - My Account{% endblock %}

{% block nav %}
<nav class="navbar navbar-main navbar-expand-lg border-bottom">
<div class="container">
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_nav" aria-controls="main_nav" aria-expanded="false" aria-label="Toggle navigation">
	<span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="main_nav">
	<ul class="navbar-nav">
		<li class="nav-item">
			<a class="nav-link" href="{% url 'main:home' %}">Home</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="{% url 'main:product_list' %}">All Products</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#">Services</a>
		</li>
	</ul>
	</div>
</div>
</nav>
{% endblock %}

{% block content %}

<!-- ========================= SECTION PAGETOP ========================= -->
<section class="section-pagetop bg-gray">
<div class="container">
	<h2 class="title-page">My account</h2>
</div>
</section>
<!-- ========================= SECTION PAGETOP END// ========================= -->

<!-- ========================= SECTION CONTENT ========================= -->
<section class="section-content padding-y">
<div class="container">

<div class="row">
	<aside class="col-md-3">
		<nav class="list-group">
			<a class="list-group-item" href="{% url 'accounts:profile_main' %}"> Account overview  </a>
			<a class="list-group-item" href="{% url 'accounts:profile_address' %}"> My Address </a>
			<a class="list-group-item" href="{% url 'accounts:profile_orders' %}"> My Orders </a>
			<a class="list-group-item" href="{% url 'accounts:profile_wishlist' %}"> My wishlist </a>
			{% if user.status == 'seller' %}
				<a class="list-group-item" href="{% url 'accounts:profile_seller' %}"> My Selling Items </a>
			{% endif %}
			<a class="list-group-item active" href="{% url 'accounts:profile_settings' %}"> Settings </a>
			<a class="list-group-item" href="{% url 'accounts:logout' %}"> Log out </a>
		</nav>
	</aside> <!-- col.// -->
	<main class="col-md-9">

	<div class="card">
      <div class="card-body">
      
      	{% if messages %}
      		{% for message in messages %}
      			<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
      				{{ message }}
      				<button type="button" class="close" data-dismiss="alert" aria-label="Close">
      					<span aria-hidden="true">&times;</span>
      				</button>
      			</div>
      		{% endfor %}
      	{% endif %}
      
     <form method="POST" enctype="multipart/form-data" class="row">
     	{% csrf_token %}
     	<div class="col-md-9">
     		<div class="form-row">
				<div class="col form-group">
					<label>First Name</label>
				  	<input type="text" name="first_name" class="form-control" value="{{ user.first_name }}" required>
				</div>
				<div class="col form-group">
					<label>Last Name</label>
				  	<input type="text" name="last_name" class="form-control" value="{{ user.last_name }}" required>
				</div>
			</div>
			
			<div class="form-row">
				<div class="col form-group">
					<label>Username</label>
				  	<input type="text" name="username" class="form-control" value="{{ user.username }}" required>
				</div>
				<div class="col form-group">
					<label>Email</label>
				  	<input type="email" name="email" class="form-control" value="{{ user.email }}" required>
				</div>
			</div>

			<div class="form-group">
				<label>Phone</label>
				<input type="text" name="phone" class="form-control" value="{{ user.phone }}" required>
			</div>

			<div class="form-group">
				<label>Address</label>
				<textarea name="address" class="form-control" rows="3" required>{{ user.address }}</textarea>
			</div>

			<div class="form-group">
				<label>Profile Image</label>
				<input type="file" name="image" class="form-control-file">
				{% if user.image %}
					<small class="form-text text-muted">Current image will be replaced if you upload a new one</small>
				{% endif %}
			</div>

			<button type="submit" class="btn btn-primary">Save Changes</button>	
			<a href="#" class="btn btn-light" data-toggle="modal" data-target="#passwordModal">Change password</a>	

			<br><br><br><br><br><br>

     	</div>
     	<div class="col-md">
     		{% if user.image %}
     			<img src="{{ user.image.url }}" class="img-md rounded-circle border" alt="{{ user.username }}">
     		{% else %}
     			<img src="{% static 'images/avatars/avatar1.jpg' %}" class="img-md rounded-circle border">
     		{% endif %}
     		<p class="text-muted mt-2">Status: <strong>{{ user.get_status_display }}</strong></p>
     	</div>
      </form>
      </div>
    </div>

	</main>
</div>

</div>
</section>
<!-- ========================= SECTION CONTENT END// ========================= -->

<!-- Password Change Modal -->
<div class="modal fade" id="passwordModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Change Password</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="POST" action="#">
      	{% csrf_token %}
	      <div class="modal-body">
	        <div class="form-group">
	        	<label>Current Password</label>
	        	<input type="password" name="old_password" class="form-control" required>
	        </div>
	        <div class="form-group">
	        	<label>New Password</label>
	        	<input type="password" name="new_password1" class="form-control" required>
	        </div>
	        <div class="form-group">
	        	<label>Confirm New Password</label>
	        	<input type="password" name="new_password2" class="form-control" required>
	        </div>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
	        <button type="submit" class="btn btn-primary">Change Password</button>
	      </div>
      </form>
    </div>
  </div>
</div>

{% endblock content %}